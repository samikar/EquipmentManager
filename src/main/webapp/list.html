<!DOCTYPE html>
<html>

<head>
  <title>Equipment list</title>
  <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">

  <!-- Bootstrap -->
  <link href = "css/bootstrap.min.css" rel = "stylesheet">
  <link href = "css/bootstrap-table.css" rel = "stylesheet">
  <link href = "css/datatables.min.css" rel = "stylesheet">


  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

      <!--[if lt IE 9]>
      <script src = "https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src = "https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
     <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Equipment manager</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Take</a></li>
            <li><a href="return.html">Return</a></li>
            <li class="active"><a href="list.html">Equipment list</a></li>
            <li><a href="charts.html">Charts</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>


    <div class="container">
    <br><br><br>
    <div class="row">
      <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
        <table class="table table-striped table-hover display" id="tbl_equipment">
          <tbody>
          </tbody>
        </table>
      </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 cold-sm-12 col-xs-12">
        <div id="status" class="alert hidden"></div>    
      </div>
    </div>
  </div> <!-- /container -->

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!--script src = "https://code.jquery.com/jquery.js"></script-->
  <script src = "js/jquery-3.2.1.js"></script>

  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src = "js/bootstrap.min.js"></script>

  <!-- Data Tables library -->
  <script src = "js/datatables.min.js"></script>

  <!-- Bootstrap Table library -->
  <script src = "js/bootstrap-table.js"></script>
  
<script>
    $(document).ready(function(){
$.post("rest/getEquipmentStatus",
        function(data){
          // success
          console.dir(data);
          var arrayLength = data.length;
          var dataSet = [];
          // Parse JSON-data to array for Data Tables
          for (var i=0; i< arrayLength; i++) {
            var equipment = [data[i]["serial"], 
                             data[i]["name"], 
                             data[i]["employeeId"], 
                             data[i]["equipmenttype"]["typeName"], 
                             data[i]["availability"]];
            dataSet.push(equipment);
          }
          
          $('#tbl_equipment').DataTable( {
                  data: dataSet,
          columns: [
            { title: "Serial number" },
            { title: "Name" },
            { title: "EmployeeId" },
            { title: "Type" },
            { title: "Availability" }
          ]
          });

        })
        .done(function() {
        //alert( "second success" );
  
        })
        .fail(function(jqXHR, textStatus) {
          $('#txt_equipmentId').val("");
          $("#status").addClass('alert-danger');
          $("#status").removeClass('hidden');
          $('#status').text("Error: " + jqXHR["responseJSON"]["message"]);       
        })
        .always(function() {
          //alert( "finished" );
        });
    });
  </script> 
  </body>
</html>